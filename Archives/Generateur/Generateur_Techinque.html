<!doctype html>
<html lang="fr">
<head>
  <title>GENERATEUR JSON</title>
    <meta charset="utf-8"/>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <script src="http://code.jquery.com/jquery-latest.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=ABeeZee">
    <link rel="stylesheet" href="style.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <script src="./FonctionG_A_PART.js"></script>
</head>

<body>
    <div id="main">
        <div class="HautDePage">
            <div class="row">
                <div class="col-12 col-md-9">
                    <div class="cadre">
                        <div class="grille" id="Personnages">
                            <!--Affichage des images ici-->
                            <table id="table"><tr></tr></table>
                        </div>
                    </div>
                </div>
                <div class="col-12 col-md-3">
                    <div class="proposition">
                        <div class="row">
                            <div class="col-3 col-md-12">
                                <img src="Logo-QuiEstce.png" alt="Qui Est-ce?" class="logo" onclick="location.reload()" title="Recharger la page">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div><br>
        <div class="row">  
            <div id="attr" class="col-2">
                <div class="attributs">Nom du personnage</div>
                <div id="LigneAttr0" class="attributs">1er Attribut</div>
            </div>
            <!-- <div class="col-10"> -->
                <!-- <div class="row"> -->
                    <div id="valeurs" class="col-7">
                        <input type="text" class="val" id="valeurNom"></br>
                        <input type="text" class="val" id="valeur0"></br>
                    </div>
                    <div id="button" class="col-3">
                        <div class="col-12 col-md-12">
                            <div class="listAttribut">
                                <h5>Liste des attributs</h5><br>
                                <input class="saisieAttributs" type="text" id="attr0"></br>
                            </div>
                            <input type="button" id="addAttribut" value="+" onclick="nombreAttributs+=1,AjoutAttribut()">        
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div id="import" class="col-2">
                <input type="file" id="file" title="Choisir une image."/><br/><br/>
                <button id="importButton" onclick="importIMG()" title="Importer l'image choisie précédemment.">Importer</button>
            </div>
            <div class="col-7"></div>
            <div id="validation" class="col-3">
                <br/>
                <input id="VALIDER" type="button" value="Créer le Personnage" onclick="creationObjetPerso()" title="Après la création du permier personnage du Qui-Est-ce? il n'est plus possible d'ajouter/modifier/retirer des attributs">
                <br/><br/>
                <input id="CONVERSION" type="button" value="TELECHARGER JSON" onclick="conversionJSON()">
            </div>

        </div>
    </div>
    <script>
        var nombreAttributs = 1;

        //Affichage dynamique du nom des attributs
        function AffichageDyn(){
            for(let i=0;i<nombreAttributs;i++){
                $('#attr'+i).off;
                $('#attr'+i).on('input',function(e){
                    if($('#attr'+i).val() != ""){
                        $('#LigneAttr'+i).empty();
                        $('#LigneAttr'+i).append($('#attr'+i).val()+"");
                    } 
                    else {
                        $('#LigneAttr'+i).empty();
                        if (i==0){
                            $('#LigneAttr'+i).append((i+1)+"er Attribut");
                        }
                        else {
                            $('#LigneAttr'+i).append((i+1)+"ème Attribut");
                        }
                    }
                });
            }
        }
        AffichageDyn();
    </script>
</body>
</html>
